@model OCTWEB_NET45.Models.ManageCourseModel
@{
    ViewBag.Title = "UpdateAssessment";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<div class="container-fluid" style="margin-bottom: 50px;">
    <div style="display: inline-block; margin-right: 10px;">
        <a href="/TrainingCourseManagement/CourseSetup" class="btn-outline-secondary"><i class="fa fa-angle-left"></i>  Training Course Setup</a>
        <a href="/TrainingCourseAddAndManage/CourseList" class="btn-outline-secondary"><i class="fa fa-angle-left"></i>  Training Course Manage</a>
        <a href="@Url.Action(actionName: "ManageCourse", controllerName: "TrainingCourseAddAndManage", routeValues: new { id = Model.CourseModel.course_header_id })" class="btn-outline-secondary"><i class="fa fa-angle-left"></i> Course Management </a>
    </div>
</div>     

<div class="container-fluid">
    <div class="row">
        <div class="container-fluid">
            @using (Html.BeginForm("UpdateAssessment", "TrainingCourseAddAndManage", FormMethod.Post, new { @class = "form-horizontal", role = "form", @id = "Form1", enctype = "multipart/form-data" }))
            {
                @Html.HiddenFor(m => m.CourseModel.course_header_id)
                <div class="row">
                    <div class="col">

                    </div>
                </div>
                <div class="row">
                    <div class="col">
                        <table class="tablecustom " id="table1" style="font-size:14px">
                            <thead>
                                @if (@Model.TraineeList.Any())
                                {
                                    <tr>
                                        <th style="text-align:center">
                                            Emp Id
                                        </th>
                                        <th style="text-align:center">
                                            First Name
                                        </th>
                                        <th style="text-align:center">
                                            Last Name
                                        </th>
                                        <th style="text-align:center">
                                            Department
                                        </th>
                                        <th colspan="4" style="text-align:center">
                                            Training Evalution <br />
                                            (ประเมินหลักสูตร)
                                        </th>
                                        <th colspan="2" style="text-align:center">
                                            Intelligibility <br />
                                            (ประเมินการอบรม)
                                        </th>
                                    </tr>
                                }

                            </thead>
                            <tbody>
                                @foreach (var item in Model.TraineeList.Select((value, i) => new { i, value }))
                                {
                                    <tr>
                                        <td>
                                            @Html.DisplayFor(modelItem => item.value.emp_id)
                                        </td>
                                        <td>
                                            @Html.DisplayFor(modelItem => item.value.fname)
                                        </td>
                                        <td>
                                            @Html.DisplayFor(modelItem => item.value.lname)
                                        </td>
                                        <td>
                                            @Html.DisplayFor(modelItem => item.value.dept)
                                        </td>
                                        <td>
                                            @{
                                                var assessment_detail = item.value.assessment;
                                                bool notgood = assessment_detail <= 1 ? true : false;
                                                bool fair = assessment_detail == 2 ? true : false;
                                                bool good = assessment_detail == 3 ? true : false;
                                                bool excellent = assessment_detail >= 4 ? true : false;
                                            }
                                            <input type="radio" id="@item.value.emp_id" name="@item.value.emp_id" value="NotGood" checked="@notgood">
                                            <label for="@item.value.emp_id">Not Good (ไม่ดี)</label>
                                        </td>
                                        <td>
                                            <input type="radio" id="@item.value.emp_id" name="@item.value.emp_id" value="Fair" checked="@fair">
                                            <label for="@item.value.emp_id">Fair(พอใช้)</label>
                                        </td>
                                        <td>
                                            <input type="radio" id="@item.value.emp_id" name="@item.value.emp_id" value="Good" checked="@good">
                                            <label for="@item.value.emp_id">Good(ดี)</label>
                                        </td>
                                        <td>
                                            <input type="radio" id="@item.value.emp_id" name="@item.value.emp_id" value="Excellent" checked="@excellent">
                                            <label for="@item.value.emp_id">Excellent(ดีมาก)</label>
                                        </td>
                                        <td>
                                            @{
                                                var select_id = item.value.emp_id + "_detail";
                                                var assessment = item.value.assessment;
                                                bool check = assessment > 1 ? true : false;
                                                bool nocheck = assessment <= 1 ? true : false;
                                            }
                                            <input type="radio" id="@select_id" name="@select_id" value="NoPass" checked="@nocheck">
                                            <label for="@select_id">Don't Pass</label>
                                        </td>
                                        <td>
                                            <input type="radio" id="@select_id" name="@select_id" value="Pass" checked="@check">
                                            <label for="@select_id">Pass</label>
                                        </td>

                                    </tr>
                                }
                            </tbody>
                        </table>
                    </div>
                </div>

                <div class="row">
                    <div class="col">
                        <div class="form-row justify-content-center">
                            <button type="submit" class="btn btn-success" value="Update Assessment">
                                <i class="fas fa-save"></i> Update Assessment
                            </button>
                            &nbsp;
                            <button type="button" onclick="history.back()" name="Cancel" class="btn btn-outline-primary">
                                <i class="fas fa-ban"></i> Cancel
                            </button>
                        </div>
                    </div>
                </div>
            }
        </div>
    </div>
</div>



<script language="JavaScript">
    $("#table1 tbody tr").click(function () {

        if ($(this).hasClass('selected')) {
            $(this).removeClass('selected');
        }
        else {
            $(this).addClass('selected');
        }

    });
</script>