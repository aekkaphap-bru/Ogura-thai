@model OCTWEB_NET45.Models.ManageWSTrainCourseModel
@{
    ViewBag.Title = "ManageWSTrainCourse";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

 <div class="container-fluid">
     <!--<div class="row">
         <a href="/TrainingCourseManageWS/ManageWSList" class="btn-outline-secondary">Training Course [WS] Setup <i class="fa fa-angle-right"></i> </a>&nbsp;
     </div>-->
     <div class="row">
         <div class="container">
             <div class="row justify-content-center">
                 <div class="col">
                     <div class="text-center">
                         <h4 class="font-weight-bolder my-1 text-center">Manage WS Train</h4>
                         <p class="text-success">@ViewBag.Message</p>
                
                     </div>
                 </div>
             </div>
             <div class="row justify-content-center">
                 <div class="col-md-8">
                     @{
                         var status_style_head = "";
                         var status_style_body = "";
                        
                         if (Model.WSTrainHeaderModel.status > 0)
                         {
                             status_style_body = "background: linear-gradient(to right, #ede6d6, #c1c8bc, #9da9a5, #81898a, #686a6c);";
                             status_style_head = "background: linear-gradient(to right, #ede6d6, #c1c8bc, #9da9a5, #81898a, #686a6c);";
                            
                         }
                         else
                         {
                             status_style_body = "background: linear-gradient(to left, #e42217, #f15244, #f9776d, #fd9a94, #fbbbb9);";
                             status_style_head = "background: linear-gradient(to left, #e42217, #f15244, #f9776d, #fd9a94, #fbbbb9);";
                            
                         }
                     }

                     <div class="card shadow-lg border-0 rounded-lg mt-0 mb-3">
                         <div class="card-header justify-content-center" style="@status_style_head">
                             <div class=" bg-white border-0 rounded-lg mt-0 mb-3  justify-content-center">
                                 <p class="font-weight-bold text-dark my-1 text-center ">
                                     @Model.WSTrainHeaderModel.Train_Name <br />
                                     [@Model.WSTrainHeaderModel.area] <br />
                                     Rev: @Model.WSTrainHeaderModel.Train_Min
                                 </p>
                             </div>
                         </div>
                         <div class="card-body" style="@status_style_body">
                             <div class="form-row">
                                 <div class="col">
                                     <p style="color:black">
                                         <span style="font-weight:bold">Topic:</span> @Model.WSTrainHeaderModel.CourseHeader <br />
                                         <span style="font-weight:bold">Location:</span> @Model.WSTrainHeaderModel.Train_Location <br />
                                         <span style="font-weight:bold">Date of WS:</span> @Model.WSTrainHeaderModel.Train_DateWS <br />
                                         <span style="font-weight:bold">*ID:</span> @Model.WSTrainHeaderModel.Trai_Temporary_Id
                                     </p>
                                 </div>
                             </div>
                             <div class="form-row">
                                 <div class="col">
                                     @if (Model.WSTrainHeaderModel.status > 0)
                                     {
                                         <a href="@Url.Action(actionName: "EditDateTimeTrainee"
                                            , controllerName: "TrainingCourseManageWS"
                                            , routeValues: new {id=Model.WSTrainHeaderModel.Id })" class="btn btn-sm btn-primary">
                                             <i class="fas fa-clock"></i> Edit Date | <i class="fas fa-users"></i> Insert Employees
                                         </a>
                                     }
                                     else
                                     {
                                         <a href="@Url.Action(actionName: "AddDateTimeTrainee"
                                            , controllerName: "TrainingCourseManageWS"
                                            , routeValues: new {id=Model.WSTrainHeaderModel.Id })" class="btn btn-sm btn-primary">
                                             <i class="fas fa-clock"></i> Create Date | <i class="fas fa-users"></i> Insert Employees
                                         </a>
                                     }
                                     &nbsp;

                                     @if (Model.WSTrainHeaderModel.downloadfile != null)
                                     {
                                         <a href="@Url.Action(actionName: "DownloadFile"
                                            , controllerName: "TrainingCourseManageWS"
                                            , routeValues: new {filename=Model.WSTrainHeaderModel.downloadfile })" class="btn btn-sm btn-info">
                                             <i class="fas fa-download "></i> Download File
                                         </a>
                                     }
                                     &nbsp;

                                     <a href="@Url.Action(actionName: "DeleteCourse"
                                        , controllerName: "TrainingCourseManageWS"
                                        , routeValues: new {id=Model.WSTrainHeaderModel.Id })"
                                        class="btn btn-sm btn-danger"
                                        onclick="return confirm('Are you sure to delete this course?');">
                                         <i class="fas fa-trash-alt"></i> Delete
                                     </a>

                                 </div>
                             </div>
                         </div>
                         <div class="card-footer">
                             @if (Model.WSTrainHeaderModel.status > 0)
                             {
                                 <p style="color:black"><span class="badge badge-success badge-pill"><i class="far fa-check-circle"></i> Upload Completed</span></p>
                                 <p class="text-dark">
                                     @Model.DateTrainStart - @Model.DateTrainEnd <br />
                                     เวลา @Model.TimeTrainStart ถึง @Model.TimeTrainEnd  เป็นจำนวนเวลาทั้งหมด : <!--Model.TrainDays--> @Model.TrainHours @Model.TrainMinutes   ความเข้าใจในการอบรมคิดเป็น : @Model.CalAssessment
                                 </p>
                             }
                             else
                             {
                                 <p style="color:black"><span class="badge badge-danger badge-pill"><i class="fas fa-spinner"></i> Waiting Upload</span></p>
                             }


                         </div>
                     </div>
                 </div>
             </div>
         </div>
     </div>
     <div class="row">
         <div class="container-fluid">
             @using (Html.BeginForm("ManageWSTrainCourse", "TrainingCourseManageWS", FormMethod.Post, new { @class = "form-horizontal", role = "form", @id = "Form1", enctype = "multipart/form-data" }))
             {
                 @Html.HiddenFor(m => m.WSTrainHeaderModel.Id)
                 @Html.HiddenFor(m => m.WSTrainHeaderModel.CourseHeader)
                 @Html.HiddenFor(m => m.WSTrainHeaderModel.area)
                 @Html.HiddenFor(m => m.WSTrainHeaderModel.Trai_Temporary_Id)
                 @Html.HiddenFor(m => m.WSTrainHeaderModel.Train_DateWS)
                 @Html.HiddenFor(m => m.WSTrainHeaderModel.Train_Name)
                 @Html.HiddenFor(m => m.WSTrainHeaderModel.Train_Min)
                 @Html.HiddenFor(m => m.WSTrainHeaderModel.status)
                 @Html.HiddenFor(m => m.WSTrainHeaderModel.downloadfile)

                 @Html.HiddenFor(m => m.TimeTrainStart)
                 @Html.HiddenFor(m => m.TimeTrainEnd)
                 @Html.HiddenFor(m => m.TrainDays)
                 @Html.HiddenFor(m => m.TrainHours)
                 @Html.HiddenFor(m => m.TrainMinutes)
                 @Html.HiddenFor(m => m.DateTrainStart)
                 @Html.HiddenFor(m => m.DateTrainEnd)

                 <div class="row">
                     <div class="col">
                         <table class="tablecustom " id="table1" style="font-size:14px">
                             <thead>
                                 @if (@Model.TraineeList.Any())
                                 {
                                     <tr>
                                         <th style="text-align:center">
                                             Items
                                         </th>
                                         <th style="text-align:center">
                                             Emp Id
                                         </th>
                                         <th style="text-align:center">
                                             First Name
                                         </th>
                                         <th style="text-align:center">
                                             Last Name
                                         </th>
                                         <th style="text-align:center">
                                             Nation
                                         </th>
                                         <th style="text-align:center">
                                             Department
                                         </th>
                                         <th style="text-align:center">
                                             Position
                                         </th>
                                         <th style="text-align:center">
                                             Assessment <br />
                                             <a href="@Url.Action(actionName: "UpdateAssessment"
                                        , controllerName: "TrainingCourseManageWS"
                                        , routeValues: new {id=Model.WSTrainHeaderModel.Id })" class="btn btn-sm btn-success">
                                                 <i class="fas fa-user-check"></i> Update Assessment
                                             </a>
                                         </th>
                                         <th style="text-align:center">
                                             Delete
                                         </th>
                                     </tr>
                                 }

                             </thead>
                             <tbody>
                                 @foreach (var item in Model.TraineeList.Select((value, i) => new { i, value }))
                                 {
                                     <tr>
                                         <td>
                                             @(item.i + 1)
                                         </td>
                                         <td>
                                             @Html.DisplayFor(modelItem => item.value.emp_id)
                                         </td>
                                         <td>
                                             @Html.DisplayFor(modelItem => item.value.fname)
                                         </td>
                                         <td>
                                             @Html.DisplayFor(modelItem => item.value.lname)
                                         </td>
                                         <td>
                                             @Html.DisplayFor(modelItem => item.value.nation)
                                         </td>
                                         <td>
                                             @Html.DisplayFor(modelItem => item.value.dept)
                                         </td>
                                         <td>
                                             @Html.DisplayFor(modelItem => item.value.position)
                                         </td>
                                         <td>
                                             @{
                                     var assessment = item.value.assessment;
                                     string showtext = "";
                                     if (assessment >= 3) { showtext = "Pass (ผ่าน)"; }
                                     else { showtext = "No Pass (ไม่ผ่าน)"; }
                                     bool check = assessment == 3 ? true : false;
                                     bool nocheck = assessment != 3 ? true : false;
                                             }
                                             <p>@showtext</p>
                                         </td>
                                         <td>
                                             <a href="@Url.Action(actionName: "DeleteTrainee"
                                            , controllerName: "TrainingCourseManageWS"
                                            , routeValues: new {id=Model.WSTrainHeaderModel.Id,emp_id=item.value.emp_id })"
                                                class="btn btn-sm btn-danger"
                                                onclick="return confirm('Are you sure to delete this employee?');">
                                                 <i class="fas fa-trash-alt"></i> Delete
                                             </a>
                                         </td>
                                     </tr>
                                 }
                             </tbody>
                         </table>
                     </div>
                 </div>

                 <div class="row">
                     <div class="col">
                         <div class="form-row justify-content-center">

                             <button type="button" onclick="history.back()" class="btn btn-outline-primary"><i class="fa fa-undo" > Back</i></button>
                         </div>
                     </div>
                 </div>
             }
         </div>
     </div>
 </div>         
   
 
 

<script language="JavaScript">
    $("#table1 tbody tr").click(function () {

        if ($(this).hasClass('selected')) {
            $(this).removeClass('selected');
        }
        else {
            $(this).addClass('selected');
        }

    });
</script>