<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="ORAWAN M.">
    <title>OCT - @ViewBag.Title</title>
    <link rel="icon" type="image/x-icon" href="~/static/img/1ico.png" />
    <link rel="stylesheet" href="~/content/style_custom_viewpoint.css" media="screen and (max-width:1280px)" />
    <link href="~/static/vendor/fontawesome-free-5.15.4-web/css/all.min.css" rel="stylesheet" />
    <link href="~/static/boostrap-4.1.3/css/bootstrap.min.css" rel="stylesheet" />
    <link href="~/content/style_table_list.css" rel="stylesheet" />
    <link href="~/content/style_fieldset_legend.css" rel="stylesheet" />
    <link href="~/content/jquery-ui.css" rel="stylesheet" />
    <link href="~/content/pagedlist.css" rel="stylesheet" />
    <link type="text/css" href="~/static/select2/css/select2.min.css" rel="stylesheet" />
    <script src="~/static/vendor/jquery/jquery.min.js"></script>
    <script src="~/static/select2/js/select2.min.js"></script>
    <script src="~/scripts/jquery-ui.js"></script>
    <script src="~/static/boostrap-4.1.3/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="~/static/vendor/jquery-easing/jquery.easing.min.js"></script>
    <script type="text/javascript" src="~/static/vendor/chart.js/chart.min.js"></script>
    <link href="~/content/style_sidebar.css" rel="stylesheet" />
    <!-------------------------------- Alert Sweet ------------------------------------------------->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/sweetalert2@11/dist/sweetalert2.min.css">
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11/dist/sweetalert2.all.min.js"></script>
    <!-- DataTables CSS -->
    <link href="https://cdn.datatables.net/1.13.6/css/jquery.dataTables.min.css" rel="stylesheet" />

    <!-- DataTables JS -->
    <script src="https://cdn.datatables.net/1.13.6/js/jquery.dataTables.min.js"></script>



    <style>
        #topbarwhite {
            background: linear-gradient(to right, #1a418a, #2c5089, #425e85, #596b80, #73777b);
        }

        #btn-back-to-top {
            position: fixed;
            bottom: 20px;
            right: 20px;
            display: none;
        }

        #btn-open-side-menu {
            position: fixed;
            top: 140px;
            left: -20px;
            display: block;
            transform: rotate(90deg);
        }

        .form-group label {
            font-size: 14px;
        }
    </style>

    @RenderSection("scripts", required: false)

</head>
<body id="page-top">

    <div class="row">



        @if (Session["MenuModels"] != null)
        {
            <!-- Menu -->
            <div class="side-menu" id="sidemenubar">
                @Html.Partial("_sidebar")
            </div>
            <!-- uncomment code for absolute positioning tweek see top comment in css -->
            <div class="absolute-wrapper"></div>

            <!-- Shew side menu -->
            <button class="btn btn-outline-secondary btn-floating btn-sm" id="btn-open-side-menu" onclick="openNav()">
                &#9776; Menu
            </button>
        }

        <!-- Main Content -->
        @Html.Partial("_topbar")

        <div class="container-fluid">
            <div class="side-body " id="main">

                <div class="row">
                    <div class="col">
                        <div class="form-group">
                            @RenderBody()
                        </div>
                    </div>

                </div>
                <div class="row justify-content-center">
                    @Html.Partial("_footer")
                </div>
            </div>
        </div>
        <!-- Back to top button -->
        <button type="button" class="btn btn-outline-secondary btn-floating btn-lg" id="btn-back-to-top">
            <i class="fa fa-chevron-up"></i><!--fa-arrow-up-->
        </button>
        <!-- Logout Modal-->
        <div class="modal fade" id="logoutModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
            <div class="modal-dialog" role="document">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title" id="exampleModalLabel">Ready to Leave?</h5>
                        <button class="close" type="button" data-dismiss="modal" aria-label="Close">
                            <span aria-hidden="true">×</span>
                        </button>
                    </div>
                    <div class="modal-body">Select "Logout" below if you are ready to end your current session.</div>
                    <div class="modal-footer">
                        <button class="btn btn-secondary" type="button" data-dismiss="modal">Cancel</button>
                        <a class="btn btn-primary" href="/Account/LogOff">Logout</a>
                    </div>
                </div>
            </div>
        </div>
    </div>

</body>
</html>
<script language="JavaScript">
    //Get the button
    let mybutton = document.getElementById("btn-back-to-top");

    // When the user scrolls down 20px from the top of the document, show the button
    window.onscroll = function () {
        scrollFunction();
    };

    function scrollFunction() {
        if (
            document.body.scrollTop > 20 ||
            document.documentElement.scrollTop > 20
        ) {
            mybutton.style.display = "block";
        } else {
            mybutton.style.display = "none";
        }
    }
    // When the user clicks on the button, scroll to the top of the document
    mybutton.addEventListener("click", backToTop);

    function backToTop() {
        document.body.scrollTop = 0;
        document.documentElement.scrollTop = 0;
    }

    //sidebar
    $(function () {
        $('.navbar-toggle').click(function () {
            $('.navbar-nav').toggleClass('slide-in');
            $('.side-body').toggleClass('body-slide-in');
            $('#search').removeClass('in').addClass('collapse').slideUp(200);

            /// uncomment code for absolute positioning tweek see top comment in css
            $('.absolute-wrapper').toggleClass('slide-in');

        });

        // Remove menu for searching
        $('#search-trigger').click(function () {
            $('.navbar-nav').removeClass('slide-in');
            $('.side-body').removeClass('body-slide-in');

            /// uncomment code for absolute positioning tweek see top comment in css
            $('.absolute-wrapper').removeClass('slide-in');

        });
    });



    //small screen
    $(window).resize(function () {
        if ($(window).width() < 768) {
            document.getElementById("sidemenubar").style.width = "0";
            document.getElementById("main").style.marginLeft = "0";
        }
    });

    /* Set the width of the sidebar to 250px and the left margin of the page content to 250px */
    function openNav() {
        document.getElementById("sidemenubar").style.width = "";
        document.getElementById("main").style.marginLeft = "";
    }

    /* Set the width of the sidebar to 0 and the left margin of the page content to 0 */
    function closeNav() {
        document.getElementById("sidemenubar").style.width = "0";
        document.getElementById("main").style.marginLeft = "0";
        localStorage.setItem("coll_" + "sidemenubar", false);
    }

    /* -----------------------Jquery */
    document.addEventListener("DOMContentLoaded", function () {
        let sidebar = document.getElementById("sidemenubar");
        let mainContent = document.getElementById("main");
        sidebar.style.width = "0";
        mainContent.style.marginLeft = "0";

        // ตรวจสอบค่าใน Local Storage
        let isSidebarOpen = localStorage.getItem("sidebar_open");

        if (isSidebarOpen === "true") {
            openNav(); // เปิด Sidebar อัตโนมัติ
        }

        function openNav() {
            sidebar.style.width = "";
            mainContent.style.marginLeft = "";
            localStorage.setItem("sidebar_open", "true"); // บันทึกสถานะว่าเปิดอยู่
        }

        function closeNav() {
            sidebar.style.width = "0";
            mainContent.style.marginLeft = "0";
            localStorage.setItem("sidebar_open", "false"); // บันทึกสถานะว่าปิด
        }

        // ปุ่มเปิด/ปิด Sidebar
        document.getElementById("btn-open-side-menu").addEventListener("click", openNav);
    });
</script>