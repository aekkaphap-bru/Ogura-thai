
@model PagedList.IPagedList<OCTWEB_NET45.Models.DocumentListViewModel>
@using PagedList.Mvc;

@* นี่คือส่วนที่เคยเป็น Hardcode ใน List.cshtml แต่ตอนนี้จะรับข้อมูลจาก Model *@
<div class="document-list">
    @if (Model != null && Model.Any())
    {
        foreach (var item in Model)
        {
            <div class="document-item">
                <div class="document-info">
                    <div class="document-title">@item.WS_name</div>
                    <div class="document-meta">
                        <span class="document-id">@item.LId</span>
                        <span><i class="fas fa-user"></i> @item.Created_by</span>
                        <span><i class="fas fa-calendar"></i> @item.Created_at.ToString("dd/MM/yyyy")</span>
                    </div>
                </div>
                @{
                    string statusClass = "";
                    string statusText = "";
                    switch (item.Status)
                    {
                        case "approved":
                            statusClass = "status-approved";
                            statusText = "อนุมัติแล้ว";
                            break;
                        case "pending":
                            statusClass = "status-pending";
                            statusText = "รอดำเนินการ";
                            break;
                        case "rejected":
                            statusClass = "status-rejected";
                            statusText = "ปฏิเสธ";
                            break;
                        default:
                            statusClass = "status-unknown";
                            statusText = "ไม่ทราบสถานะ";
                            break;
                    }
                }
                <div class="status-badge @statusClass">@statusText</div>
                <div class="document-actions">
                    @* ปุ่มดูรายละเอียด (ส่ง LId ไปที่ Details Action) *@
                    <button class="btn-action btn-view" title="ดูรายละเอียด" >
                        <i class="fas fa-eye"></i>
                    </button>
                    @* ปุ่มแก้ไข (ส่ง LId ไปที่ Edit Action) *@
                    <button class="btn-action btn-edit" title="แก้ไข" data-l-id="@item.LId">
                        <i class="fas fa-edit"></i>
                    </button>
                </div>
            </div>
        }
    }
    else
    {
        <div class="text-center py-4 text-muted">ไม่พบข้อมูลคำร้อง</div>
    }
</div>